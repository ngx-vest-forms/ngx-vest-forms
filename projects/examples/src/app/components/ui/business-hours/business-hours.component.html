<div ngModelGroup="businessHours" ngx-control-wrapper class="space-y-4">
  <!-- Existing Business Hours List -->
  <div ngModelGroup="values" ngx-control-wrapper class="space-y-3">
    @for (item of businessHoursModel()?.values | keyvalue; track item.key) {
      <div
        ngx-control-wrapper
        [ngModelGroup]="item.key"
        class="group relative rounded-lg border border-gray-200 bg-gray-50 p-4 transition-colors hover:bg-white dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-800"
      >
        <div class="flex items-start justify-between gap-4">
          <ngx-business-hour
            [businessHour]="businessHoursModel()?.values?.[item.key]"
            class="flex-grow"
          ></ngx-business-hour>

          <button
            type="button"
            (click)="removeBusinessHour(item.key)"
            class="mt-7 inline-flex items-center rounded-md p-2 text-gray-400 hover:bg-red-50 hover:text-red-600 focus:outline-hidden focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:hover:bg-red-900/20 dark:hover:text-red-400"
            title="Remove business hour"
          >
            <span class="sr-only">Remove</span>
            <i class="fa-solid fa-trash"></i>
          </button>
        </div>
      </div>
    }
  </div>

  @if ((businessHoursModel()?.values | keyvalue)?.length) {
    <div class="relative py-4">
      <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-gray-200 dark:border-gray-700"></div>
      </div>
      <div class="relative flex justify-center">
        <span
          class="bg-white px-2 text-sm text-gray-500 dark:bg-gray-800 dark:text-gray-400"
          >Add New Time Slot</span
        >
      </div>
    </div>
  }

  <!-- Add New Business Hour -->
  <div
    ngx-control-wrapper
    ngModelGroup="addValue"
    #group="ngModelGroup"
    class="rounded-lg border-2 border-dashed border-gray-300 p-4 dark:border-gray-700"
  >
    <div class="flex items-start justify-between gap-4">
      <ngx-business-hour
        [businessHour]="businessHoursModel()?.addValue"
        class="flex-grow"
      ></ngx-business-hour>

      <button
        type="button"
        [disabled]="group.invalid || group.pending"
        (click)="addBusinessHour(group)"
        class="btn btn-secondary mt-7"
      >
        <i class="fa-solid fa-plus mr-2"></i>
        Add
      </button>
    </div>
  </div>
</div>
