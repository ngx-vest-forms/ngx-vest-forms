<div class="page-container">
  <ngx-page-title
    title="Multi-Form Wizard"
    subtitle="Run three coordinated forms with per-step validation and one final submission flow."
  />

  <ngx-form-page-layout>
    <div layout-aside class="sidebar-card-stack">
      <ngx-card title="Wizard State">
        <div class="space-y-3">
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-300"
              >Step 1: Account</span
            >
            <ngx-status-badge [valid]="step1Valid()" />
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-300"
              >Step 2: Profile</span
            >
            <ngx-status-badge [valid]="step2Valid()" />
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-300"
              >Step 3: Confirm</span
            >
            <ngx-status-badge [valid]="step3Valid()" />
          </div>
        </div>

        <div class="mt-4 border-t border-gray-100 pt-4 dark:border-gray-700">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-300"
            >Overall</span
          >
          <div class="mt-2">
            <ngx-status-badge
              [valid]="allFormsValid()"
              validLabel="Ready to submit"
              invalidLabel="Complete all steps"
            />
          </div>
        </div>
      </ngx-card>

      <ngx-form-state-card
        [isValid]="allFormsValid()"
        [formValue]="currentStepData()"
        [errors]="currentStepErrors()"
        [info]="wizardInfo()"
      />

      <ngx-card title="Key Features">
        <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
          <li>Bidirectional validation for confirmation fields.</li>
          <li>Conditional newsletter frequency requirement.</li>
          <li>Final submit validates all forms together.</li>
          <li>Step state persists while navigating.</li>
        </ul>
      </ngx-card>
    </div>

    <div layout-main>
      <ngx-wizard-form-body
        [steps]="steps"
        [currentStep]="currentStep()"
        [completedSteps]="completedSteps()"
        [submitSuccess]="submitSuccess()"
        [submitError]="submitError()"
        [isSubmitting]="isSubmitting()"
        [step1Data]="step1Data()"
        [step2Data]="step2Data()"
        [step3Data]="step3Data()"
        [step1Suite]="step1Suite"
        [step2Suite]="step2Suite"
        [step3Suite]="step3Suite"
        [step1Shape]="step1Shape"
        [step2Shape]="step2Shape"
        [step3Shape]="step3Shape"
        [step1ValidationConfig]="step1ValidationConfig"
        [step2ValidationConfig]="step2ValidationConfig()"
        [step1Valid]="step1Valid()"
        [step2Valid]="step2Valid()"
        [step3Valid]="step3Valid()"
        (step1DataChange)="step1Data.set($event)"
        (step2DataChange)="step2Data.set($event)"
        (step3DataChange)="step3Data.set($event)"
        (step1ValidChange)="step1Valid.set($event)"
        (step2ValidChange)="step2Valid.set($event)"
        (step3ValidChange)="step3Valid.set($event)"
        (step1ErrorsChange)="step1Errors.set($event)"
        (step2ErrorsChange)="step2Errors.set($event)"
        (step3ErrorsChange)="step3Errors.set($event)"
        (resetWizard)="resetWizard()"
        (goToStep)="goToStep($event)"
        (previousStep)="previousStep()"
        (step1Submit)="onStep1Submit()"
        (step2Submit)="onStep2Submit()"
        (step3Submit)="onStep3Submit()"
        (submitAll)="submitAll()"
      />
    </div>
  </ngx-form-page-layout>
</div>
