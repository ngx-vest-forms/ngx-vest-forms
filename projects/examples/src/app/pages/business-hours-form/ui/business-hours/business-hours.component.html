<div ngModelGroup="businessHours" class="business-hours-stack">
  <!-- Existing Business Hours List -->
  <fieldset
    ngxFormGroupWrapper
    ngModelGroup="values"
    #valuesGroup="ngModelGroup"
    #valuesWrapper="ngxFormGroupWrapper"
    [attr.aria-describedby]="valuesWrapper.describedByIds()"
    class="business-hours-list-stack"
  >
    <legend class="sr-only">Configured business hour slots</legend>

    @for (item of values() | keyvalue; track item.key) {
      <fieldset
        ngxFormGroupWrapper
        [ngModelGroup]="item.key"
        class="form-shell business-hours-item-card"
      >
        <legend class="sr-only">Business hour slot {{ item.key }}</legend>

        <div class="business-hours-item-layout">
          <ngx-business-hour
            [businessHour]="values()[item.key]"
            [idPrefix]="'business-hours-values-' + item.key"
            class="business-hours-item-main"
          ></ngx-business-hour>

          <button
            type="button"
            (click)="removeBusinessHour(item.key, valuesGroup)"
            class="business-hours-remove-btn"
            [title]="'Remove business hour slot ' + item.key"
            [attr.aria-label]="'Remove business hour slot ' + item.key"
          >
            <i class="fa-solid fa-trash" aria-hidden="true"></i>
          </button>
        </div>
      </fieldset>
    }
  </fieldset>

  @if ((values() | keyvalue)?.length) {
    <div class="business-hours-divider">
      <div class="business-hours-divider-line" aria-hidden="true">
        <div class="business-hours-divider-rule"></div>
      </div>
      <div class="business-hours-divider-content">
        <span class="business-hours-divider-label">Add New Time Slot</span>
      </div>
    </div>
  }

  <!-- Add New Business Hour -->
  <fieldset
    ngxFormGroupWrapper
    ngModelGroup="addValue"
    #group="ngModelGroup"
    #addValueWrapper="ngxFormGroupWrapper"
    [attr.aria-describedby]="addValueWrapper.describedByIds()"
    class="form-shell business-hours-add-card"
  >
    <legend class="sr-only">Add new business hour slot</legend>

    <div class="business-hours-item-layout">
      <ngx-business-hour
        [businessHour]="addValue()"
        idPrefix="business-hours-add"
        class="business-hours-item-main"
      ></ngx-business-hour>

      <button
        type="button"
        [disabled]="isAddButtonDisabled(group)"
        (click)="addBusinessHour(group, valuesGroup)"
        class="business-hours-add-btn"
      >
        <i
          class="fa-solid fa-plus business-hours-add-btn-icon"
          aria-hidden="true"
        ></i>
        Add
      </button>
    </div>
  </fieldset>
</div>
