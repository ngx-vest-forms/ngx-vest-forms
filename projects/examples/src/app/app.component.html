<!-- Application Shell -->
<div
  class="min-h-screen bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100"
>
  <!-- Top Bar - Full Width -->
  <header
    class="w-full bg-white text-gray-800 dark:bg-gray-950 dark:text-white"
  >
    <div class="flex h-16">
      <!-- Brand Section - Left aligned -->
      <div class="flex items-center px-4 sm:px-6 lg:px-8">
        <a
          [routerLink]="'/fundamentals/minimal-form'"
          class="brand-gradient text-2xl font-bold tracking-tight focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-500/50"
        >
          ngx-vest-forms
        </a>
      </div>

      <!-- Navigation Section - Centered above sidebar (w-64) -->
      <div class="flex w-64 items-center justify-center">
        <nav
          class="hidden items-center gap-4 text-sm md:flex"
          aria-label="Primary navigation"
        >
          <a
            [routerLink]="'/fundamentals'"
            #rlaFund="routerLinkActive"
            routerLinkActive="active"
            class="nav-grad-link"
            [class.active]="rlaFund.isActive"
          >
            Fundamentals
          </a>
        </nav>
      </div>

      <!-- Theme Switcher - Right aligned -->
      <div class="flex flex-1 items-center justify-end px-4 sm:px-6 lg:px-8">
        <ngx-theme-switcher></ngx-theme-switcher>
      </div>
    </div>
  </header>

  <!-- Main Layout -->
  <div class="flex min-h-[calc(100vh-4rem)]">
    <!-- Sidebar -->
    <aside
      class="w-64 bg-white p-6 text-gray-800 dark:bg-gray-950 dark:text-white"
    >
      <div class="flex h-full flex-col">
        <div>
          <h3
            class="brand-gradient mb-4 text-xs font-semibold tracking-wide uppercase"
          >
            {{ currentCategory().label }}
          </h3>
          <nav
            aria-label="Section navigation"
            class="flex flex-col gap-2 text-sm"
          >
            @for (link of currentCategoryLinks(); track link.path) {
              <a
                [routerLink]="link.path"
                #rla="routerLinkActive"
                routerLinkActive="active"
                class="nav-grad-link"
                [class.active]="rla.isActive"
              >
                {{ link.label }}
              </a>
            }
          </nav>
        </div>
        <div
          class="mt-auto flex items-center justify-start gap-4 border-t border-purple-200/30 pt-6 text-sm text-purple-600 dark:border-white/20 dark:text-purple-200"
        >
          <a
            href="https://ngx-vest-forms.dev"
            target="_blank"
            rel="noopener"
            aria-label="Documentation"
            class="hover:text-purple-900 dark:hover:text-white"
            >📘</a
          >
          <a
            href="https://github.com/The-Ult/ngx-vest-forms"
            target="_blank"
            rel="noopener"
            aria-label="GitHub"
            class="hover:text-purple-900 dark:hover:text-white"
            >GH</a
          >
          <a
            href="https://vestjs.dev"
            target="_blank"
            rel="noopener"
            aria-label="Vest.js"
            class="hover:text-purple-900 dark:hover:text-white"
            >V</a
          >
          <a
            href="https://bsky.app/profile/arzy.dev"
            target="_blank"
            rel="noopener"
            aria-label="Bluesky"
            class="hover:text-purple-900 dark:hover:text-white"
            >🜁</a
          >
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main
      class="flex-1 overflow-hidden rounded-tl-3xl bg-gradient-to-tr from-blue-100 via-purple-50 to-indigo-200 dark:bg-gradient-to-tr dark:from-gray-900 dark:via-blue-950 dark:to-indigo-900"
    >
      <div class="h-full overflow-y-auto p-6 lg:p-8">
        <div class="mx-auto max-w-screen-2xl">
          <div class="mb-8 flex items-center justify-center">
            <h1 class="u-gradient-text text-3xl font-bold">
              {{ pageTitle() }}
            </h1>
          </div>
          <div class="min-h-0">
            <router-outlet></router-outlet>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
